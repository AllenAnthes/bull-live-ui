(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{337:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=337},379:function(e,t,n){e.exports=n(474)},471:function(e,t){},474:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),c=n.n(i),o=n(143),l=n(70),s=n(358),u=n(249),d=n.n(u),f=n(364),m=n.n(f),p=n(104),h=n(510),b=n(500),g=n(61),E=n(365),O=n.n(E),v=n(366),w=n.n(v),j=n(362),y=n.n(j),S=n(501),C=n(363),D=n.n(C),k=n(503),R=n(505),x=n(504),B=function(e){var t=e.data,n=e.title;return r.a.createElement(k.a,{elevation:0},r.a.createElement(R.a,{title:n}),r.a.createElement(x.a,null,r.a.createElement(D.a,{collapsed:3,displayDataTypes:!1,enableClipboard:!1,src:t,shouldCollapse:function(e){var t=e.src;return Array.isArray(t)&&t.length>5},name:null})))},N=function(e){var t=e.rowData;return r.a.createElement(S.a,{container:!0,spacing:2,justify:"space-evenly",style:{padding:"1rem"}},t.stacktrace&&t.stacktrace.length>0&&r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(B,{data:t.stacktrace,title:"Stacktrace:"})),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(B,{data:t.data,title:"Data:"})),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(B,{data:t.opts,title:"Options:"})))},P=n(254),T=n(511),_=n(509),L=n(333),U=function(e){return function(t){var n=function(e){var t=e.fieldOrDate,n=e.data;return t instanceof Date?t:n[t]?new Date(n[t]):void 0}({fieldOrDate:e,data:t});if(n){var a=Object(P.default)(n,"HH:mm:ss"),i=Object(T.a)(n,{includeSeconds:!0,addSuffix:!0});return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{variant:"body2"},a),r.a.createElement(g.a,{variant:"caption"},"(",i,")"))}}},q=m()((function(){return{progressBar:{backgroundColor:"green"},progressBarError:{backgroundColor:"#f44336"},liveUpdateButton:{color:"green"},title:{fontSize:14},container:{maxWidth:"100%",minWidth:"75%"}}})),Q=y()(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SOCKET_IO_URI),A=function(e){var t=e.name,n=q(),i=Object(a.useRef)(),c=Object(a.useState)({}),o=Object(l.a)(c,2),s=o[0],u=o[1],f=Object(a.useState)("latest"),m=Object(l.a)(f,2),E=m[0],v=m[1],j=Object(a.useState)(!0),y=Object(l.a)(j,2),S=y[0],C=y[1],D=Object(a.useState)(10),k=Object(l.a)(D,2),R=k[0],x=k[1],B=Object(a.useRef)(!0),P="".concat(window.location.origin).concat(window.location.pathname,"queues/").concat(t);Object(a.useEffect)((function(){return S?(console.debug("Subbing to ".concat(t)),Q.emit("subQueue",{queueName:t},(function(e){u(e.counts)}))):Q.emit("unsubQueue",{queueName:t}),function(){Q.emit("unsubQueue",{queueName:t})}}),[S,t]),Object(a.useEffect)((function(){B.current||i.current&&i.current.onQueryChange(),B.current=!1}),[t]),Object(a.useEffect)((function(){Q.removeAllListeners(),Q.on("progress",(function(e){console.debug("progress",e),i.current&&i.current.onQueryChange(),u(e.counts)}))}),[]);var T=function(e){var t=e.classes,n=e.tab;return[{title:"Id",field:"id",width:75,render:function(e){return e.id.length>12?"#".concat(e.id.slice(0,12),"..."):"#".concat(e.id)}},{title:"Progress",field:"progress",removable:!0,width:50,render:function(e){return r.a.createElement(L.a,{thickness:10,color:"primary",classes:{barColorPrimary:e.failedReason?t.progressBarError:t.progressBar},value:e.progress,variant:"determinate"})}},{title:"Created",field:"timestamp",render:U("timestamp"),width:200},{title:"Next Run",hidden:"delayed"!==n,render:function(e){var t=new Date(e.timestamp+e.delay);return U(t)(e)}},{title:"Job Started",field:"processedOn",render:U("processedOn"),width:200,hidden:["waiting","delayed"].includes(n)},{title:"Waited",field:"processedOn",width:200,render:function(e){if(e.processedOn)return Object(_.a)(new Date(e.processedOn),new Date(e.timestamp),{unit:"second"})},hidden:["waiting","delayed"].includes(n)},{title:"Finished",field:"finishedOn",width:200,render:U("finishedOn"),hidden:!["latest","completed","failed"].includes(n)},{title:"Run Time",field:"finishedOn",width:100,render:function(e){if(e.finishedOn)return Object(_.a)(new Date(e.finishedOn),new Date(e.timestamp),{unit:"second"})},hidden:!["latest","completed","failed"].includes(n)},{title:"Execution Time",field:"finishedOn",width:100,render:function(e){if(e.finishedOn)return Object(_.a)(new Date(e.finishedOn),new Date(e.processedOn),{unit:"second"})},hidden:!["latest","completed","failed"].includes(n)},{title:"Failed Reason",field:"failedReason",hidden:"failed"!==n}]}({classes:n,tab:E}),A=[{isFreeAction:!0,tooltip:"".concat(S?"Disable":"Enable"," Live Updates"),icon:S?function(){return r.a.createElement(O.a,{color:"error"})}:function(){return r.a.createElement(w.a,{className:n.liveUpdateButton})},onClick:function(){return C((function(e){return!e}))}},{isFreeAction:!0,tooltip:"Clean jobs",icon:"delete_forever",iconProps:{color:"error"},onClick:function(){var e="waiting"===E?"wait":E;fetch("".concat(P,"/jobs?type=").concat(e),{method:"DELETE"}).then(i.current.onQueryChange)},hidden:"latest"===E},{icon:"delete",tooltip:"Remove job",iconProps:{color:"error"},onClick:function(e,t){return fetch("".concat(P,"/jobs/").concat(t.id),{method:"DELETE"}).then(i.current.onQueryChange)}},function(e){return{icon:"replay",disabled:!e.failedReason,toolTip:"Retry",onClick:function(e,t){var n=t.id;return fetch("".concat(P,"/jobs/").concat(n,"/retry"),{method:"POST"}).then(i.current.onQueryChange)},hidden:!e.failedReason}}],I={loadingType:"linear",pageSize:R,pageSizeOptions:[5,10,20,50,100],actionsColumnIndex:-1,columnsButton:!0,search:!1,sorting:!1};return r.a.createElement(p.a,{square:!0,className:n.container},r.a.createElement(h.a,{value:E,onChange:function(e,t){v(t),i.current&&i.current.onQueryChange()}},["latest","active","waiting","completed","failed","delayed","paused"].map((function(e,t){return r.a.createElement(b.a,{key:e,label:r.a.createElement(g.a,null,"".concat(e,"  "),s[e]?r.a.createElement(g.a,{variant:"caption"},"(",s[e],")"):null),value:e,"aria-controls":"tabpanel-".concat(t),id:"tab-".concat(t)})}))),r.a.createElement(d.a,{onChangeRowsPerPage:function(e){return x(e)},tableRef:i,actions:A,options:I,data:function(e){var t=new URL("".concat(P,"/jobs"));return Object.entries(e).filter((function(e){var t=Object(l.a)(e,2),n=(t[0],t[1]);return Boolean(n)})).forEach((function(e){var n=Object(l.a)(e,2),a=n[0],r=n[1];return t.searchParams.append(a,r)})),"latest"!==E&&t.searchParams.append("type",E),fetch(t.toString()).then((function(e){return e.json()})).then((function(e){return u(e.counts),e.jobs}))},title:t,columns:T,detailPanel:function(e){return r.a.createElement(N,{rowData:e})}}))},I=n(62),H=n(506),W=n(502),F=n(313),K=n(326),z=n(17),J=n(2),G=n(250),M=n(367),V=n.n(M),X=n(368),Y=n.n(X),Z=n(369),$=n.n(Z),ee=n(476),te=n(508),ne=n(331),ae=n(507),re=n(482),ie=n(370),ce=n.n(ie),oe=Object(K.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));var le=function(){var e=oe(),t=Object(z.a)(),n=r.a.useState(!0),i=Object(l.a)(n,2),c=i[0],s=i[1],u=Object(a.useState)([]),d=Object(l.a)(u,2),f=d[0],m=d[1],p=Object(a.useState)(),h=Object(l.a)(p,2),b=h[0],E=h[1];return Object(a.useEffect)((function(){fetch("".concat(window.location.origin).concat(window.location.pathname,"queues/")).then((function(e){return e.json()})).then((function(e){var t;m(e.queues||[]),(null===(t=e.queues)||void 0===t?void 0:t.length)&&E(e.queues[0])}))}),[]),r.a.createElement("div",{className:e.root},r.a.createElement(H.a,null),r.a.createElement(W.a,{position:"fixed",className:Object(J.a)(e.appBar,Object(o.a)({},e.appBarShift,c))},r.a.createElement(F.a,null,r.a.createElement(G.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return s(!0)},edge:"start",className:Object(J.a)(e.menuButton,c&&e.hide)},r.a.createElement(V.a,null)),r.a.createElement(g.a,{variant:"h6",noWrap:!0},"Bull UI"))),r.a.createElement(I.a,{className:e.drawer,variant:"persistent",anchor:"left",open:c,classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.drawerHeader},r.a.createElement(G.a,{onClick:function(){return s(!1)}},"ltr"===t.direction?r.a.createElement(Y.a,null):r.a.createElement($.a,null))),r.a.createElement(ae.a,null),r.a.createElement(re.a,null,f.map((function(e,t){return r.a.createElement(ee.a,{button:!0,key:e,onClick:function(){return E(e)}},r.a.createElement(te.a,null,r.a.createElement(ce.a,null)),r.a.createElement(ne.a,{primary:e}))})))),r.a.createElement("main",{className:Object(J.a)(e.content,Object(o.a)({},e.contentShift,c))},r.a.createElement("div",{className:e.drawerHeader}),b&&r.a.createElement(A,{name:b})))};c.a.render(r.a.createElement(le,null),document.getElementById("root"))}},[[379,1,2]]]);
//# sourceMappingURL=main.89973fd7.chunk.js.map