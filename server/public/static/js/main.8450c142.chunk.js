(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{337:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=337},380:function(e,t,n){e.exports=n(475)},472:function(e,t){},475:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),c=n.n(i),o=n(143),l=n(70),s=n(359),u=n(62),d=n(507),f=n(503),m=n(313),p=n(209),h=n.n(p),E=n(367),g=n.n(E),b=n(250),O=n(61),w=n(368),v=n.n(w),j=n(369),y=n.n(j),S=n(370),C=n.n(S),D=n(477),k=n(509),R=n(331),x=n(508),B=n(483),N=n(371),P=n.n(N),T=n(2),_=n(249),L=n.n(_),U=n(104),q=n(511),Q=n(501),A=n(365),I=n.n(A),H=n(366),W=n.n(H),F=n(363),K=n.n(F),z=n(502),J=n(364),G=n.n(J),M=n(504),V=n(506),X=n(505),Y=function(e){var t=e.data,n=e.title;return r.a.createElement(M.a,{elevation:0},r.a.createElement(V.a,{title:n}),r.a.createElement(X.a,null,r.a.createElement(G.a,{collapsed:3,displayDataTypes:!1,enableClipboard:!1,src:t,shouldCollapse:function(e){var t=e.src;return Array.isArray(t)&&t.length>5},name:null})))},Z=function(e){var t=e.rowData;return r.a.createElement(z.a,{container:!0,spacing:2,justify:"space-evenly",style:{padding:"1rem"}},t.stacktrace&&t.stacktrace.length>0&&r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Y,{data:t.stacktrace,title:"Stacktrace:"})),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Y,{data:t.data,title:"Data:"})),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Y,{data:t.opts,title:"Options:"})))},$=n(254),ee=n(512),te=n(510),ne=n(333),ae=function(e){return function(t){var n=function(e){var t=e.fieldOrDate,n=e.data;return t instanceof Date?t:n[t]?new Date(n[t]):void 0}({fieldOrDate:e,data:t});if(n){var a=Object($.default)(n,"HH:mm:ss"),i=Object(ee.a)(n,{includeSeconds:!0,addSuffix:!0});return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{variant:"body2"},a),r.a.createElement(O.a,{variant:"caption"},"(",i,")"))}}},re=h()((function(){return{progressBar:{backgroundColor:"green"},progressBarError:{backgroundColor:"#f44336"},liveUpdateButton:{color:"green"},title:{fontSize:14},container:{maxWidth:"100%",minWidth:"75%"}}})),ie=K()(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SOCKET_IO_URI,{transports:["websocket","polling"]}),ce=function(e){var t=e.name,n=re(),i=Object(a.useRef)(),c=Object(a.useState)({}),o=Object(l.a)(c,2),s=o[0],u=o[1],d=Object(a.useState)("latest"),f=Object(l.a)(d,2),m=f[0],p=f[1],h=Object(a.useState)(!0),E=Object(l.a)(h,2),g=E[0],b=E[1],w=Object(a.useState)(10),v=Object(l.a)(w,2),j=v[0],y=v[1],S=Object(a.useRef)(!0),C="".concat(window.location.origin).concat(window.location.pathname,"queues/").concat(t);Object(a.useEffect)((function(){return g?ie.emit("subQueue",{queueName:t},(function(e){u(e.counts)})):ie.emit("unsubQueue",{queueName:t}),function(){ie.emit("unsubQueue",{queueName:t})}}),[g,t]),Object(a.useEffect)((function(){S.current||i.current&&i.current.onQueryChange(),S.current=!1}),[t]),Object(a.useEffect)((function(){ie.removeAllListeners(),ie.on("progress",(function(e){i.current&&i.current.onQueryChange(),u(e.counts)}))}),[]);var D=function(e){var t=e.classes,n=e.tab;return[{title:"Id",field:"id",width:75,render:function(e){return e.id.length>12?"#".concat(e.id.slice(0,12),"..."):"#".concat(e.id)}},{title:"Progress",field:"progress",removable:!0,width:50,render:function(e){return r.a.createElement(ne.a,{thickness:10,color:"primary",classes:{barColorPrimary:e.failedReason?t.progressBarError:t.progressBar},value:e.progress,variant:"determinate"})}},{title:"Created",field:"timestamp",render:ae("timestamp"),width:200},{title:"Next Run",hidden:"delayed"!==n,render:function(e){var t=new Date(e.timestamp+e.delay);return ae(t)(e)}},{title:"Job Started",field:"processedOn",render:ae("processedOn"),width:200,hidden:["waiting","delayed"].includes(n)},{title:"Waited",field:"processedOn",width:200,render:function(e){if(e.processedOn)return Object(te.a)(new Date(e.processedOn),new Date(e.timestamp),{unit:"second"})},hidden:["waiting","delayed"].includes(n)},{title:"Finished",field:"finishedOn",width:200,render:ae("finishedOn"),hidden:!["latest","completed","failed"].includes(n)},{title:"Run Time",field:"finishedOn",width:100,render:function(e){if(e.finishedOn)return Object(te.a)(new Date(e.finishedOn),new Date(e.timestamp),{unit:"second"})},hidden:!["latest","completed","failed"].includes(n)},{title:"Execution Time",field:"finishedOn",width:100,render:function(e){if(e.finishedOn)return Object(te.a)(new Date(e.finishedOn),new Date(e.processedOn),{unit:"second"})},hidden:!["latest","completed","failed"].includes(n)},{title:"Failed Reason",field:"failedReason",hidden:"failed"!==n}]}({classes:n,tab:m}),k=[{isFreeAction:!0,tooltip:"".concat(g?"Disable":"Enable"," Live Updates"),icon:g?function(){return r.a.createElement(I.a,{color:"error"})}:function(){return r.a.createElement(W.a,{className:n.liveUpdateButton})},onClick:function(){return b((function(e){return!e}))}},{isFreeAction:!0,tooltip:"Clean jobs",icon:"delete_forever",iconProps:{color:"error"},onClick:function(){var e="waiting"===m?"wait":m;fetch("".concat(C,"/jobs?type=").concat(e),{method:"DELETE"}).then(i.current.onQueryChange)},hidden:"latest"===m},{icon:"delete",tooltip:"Remove job",iconProps:{color:"error"},onClick:function(e,t){return fetch("".concat(C,"/jobs/").concat(t.id),{method:"DELETE"}).then(i.current.onQueryChange)}},function(e){return{icon:"replay",disabled:!e.failedReason,toolTip:"Retry",onClick:function(e,t){var n=t.id;return fetch("".concat(C,"/jobs/").concat(n,"/retry"),{method:"POST"}).then(i.current.onQueryChange)},hidden:!e.failedReason}}],R={loadingType:"linear",pageSize:j,pageSizeOptions:[5,10,20,50,100],actionsColumnIndex:-1,columnsButton:!0,search:!1,sorting:!1};return r.a.createElement(U.a,{square:!0,className:n.container},r.a.createElement(q.a,{value:m,onChange:function(e,t){p(t),i.current&&i.current.onQueryChange()}},["latest","active","waiting","completed","failed","delayed","paused"].map((function(e,t){return r.a.createElement(Q.a,{key:e,label:r.a.createElement(O.a,null,"".concat(e,"  "),s[e]?r.a.createElement(O.a,{variant:"caption"},"(",s[e],")"):null),value:e,"aria-controls":"tabpanel-".concat(t),id:"tab-".concat(t)})}))),r.a.createElement(L.a,{onChangeRowsPerPage:function(e){return y(e)},tableRef:i,actions:k,options:R,data:function(e){var t=new URL("".concat(C,"/jobs"));return Object.entries(e).filter((function(e){var t=Object(l.a)(e,2),n=(t[0],t[1]);return Boolean(n)})).forEach((function(e){var n=Object(l.a)(e,2),a=n[0],r=n[1];return t.searchParams.append(a,r)})),"latest"!==m&&t.searchParams.append("type",m),fetch(t.toString()).then((function(e){return e.json()})).then((function(e){return u(e.counts),e.jobs}))},title:t,columns:D,detailPanel:function(e){return r.a.createElement(Z,{rowData:e})}}))},oe=h()((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(s.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));var le=function(){var e=oe(),t=g()(),n=r.a.useState(!0),i=Object(l.a)(n,2),c=i[0],s=i[1],p=Object(a.useState)([]),h=Object(l.a)(p,2),E=h[0],w=h[1],j=Object(a.useState)(),S=Object(l.a)(j,2),N=S[0],_=S[1];return Object(a.useEffect)((function(){fetch("".concat(window.location.origin).concat(window.location.pathname,"queues/")).then((function(e){return e.json()})).then((function(e){var t;w(e.queues||[]),(null===(t=e.queues)||void 0===t?void 0:t.length)&&_(e.queues[0])}))}),[]),r.a.createElement("div",{className:e.root},r.a.createElement(d.a,null),r.a.createElement(f.a,{position:"fixed",className:Object(T.a)(e.appBar,Object(o.a)({},e.appBarShift,c))},r.a.createElement(m.a,null,r.a.createElement(b.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return s(!0)},edge:"start",className:Object(T.a)(e.menuButton,c&&e.hide)},r.a.createElement(v.a,null)),r.a.createElement(O.a,{variant:"h6",noWrap:!0},"Bull UI"))),r.a.createElement(u.a,{className:e.drawer,variant:"persistent",anchor:"left",open:c,classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.drawerHeader},r.a.createElement(b.a,{onClick:function(){return s(!1)}},"ltr"===t.direction?r.a.createElement(y.a,null):r.a.createElement(C.a,null))),r.a.createElement(x.a,null),r.a.createElement(B.a,null,E.map((function(e,t){return r.a.createElement(D.a,{button:!0,key:e,onClick:function(){return _(e)}},r.a.createElement(k.a,null,r.a.createElement(P.a,null)),r.a.createElement(R.a,{primary:e}))})))),r.a.createElement("main",{className:Object(T.a)(e.content,Object(o.a)({},e.contentShift,c))},r.a.createElement("div",{className:e.drawerHeader}),N&&r.a.createElement(ce,{name:N})))};c.a.render(r.a.createElement(le,null),document.getElementById("root"))}},[[380,1,2]]]);
//# sourceMappingURL=main.8450c142.chunk.js.map